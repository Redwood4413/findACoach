import p from"./NotFound-318e5610.js";import{_ as C,a as w,o,c as a,b as _,u as I,f as V,j as L,N as b,d as t,t as d,F as k,r as $,h as y,w as S,i as N,I as q,p as H,k as Q,g as m,T as z,e as D}from"./index-42d548a4.js";import{_ as B}from"./CoachRatePoint-f412f650.js";import{_ as F}from"./UserAvatar-984d34a2.js";import{_ as x}from"./CoachWrapperHeader-e71b663c.js";import"./CoachAvatar-5a218491.js";const M={name:"CoachReviewsListLoading",components:{SvgSpinnersRingResize:C}};const j={class:"loading"};function P(e,i,n,r,f,s){const c=C;return o(),a("div",j,[_(c,{class:"big"})])}const T=w(M,[["render",P],["__scopeId","data-v-3bd2b047"]]),U={name:"CoachReviewsListItem",props:{review:{type:Object,required:!0},highlight:{type:Boolean,default:()=>!1}},setup(){const e=I(),i=V();return{reviewsStore:e,authStore:i}},computed:{reviewRate(){return this.review.rate},fullName(){return this.reviewsStore.getAuthorFullName(this.review.reviewId)},reviewsQuantity(){return this.reviewsStore.userReviewsCount(this.review.reviewId)},highlightClass(){return this.highlight?"highlighted":""}},methods:{formatTime(e){const i={dateStyle:"short",timeStyle:"short"};return new Intl.DateTimeFormat(void 0,i).format(e)}},components:{CoachRatePoint:B,UserAvatar:F,BaseRouterLink:L,BaseButton:b}};const g=e=>(H("data-v-d0cb888f"),e=e(),Q(),e),W={class:"header"},O={class:"user-wrapper"},G={class:"user-info"},J={class:"user-name"},K={class:"quantity"},X={class:"rate"},Y={class:"section-title header"},Z=g(()=>t("span",null,"Rate:",-1)),ee={class:"rate-wrapper"},te={class:"description"},se=g(()=>t("div",{class:"section-title"},"description:",-1)),oe={class:"bottom"},ne={key:0,class:"controls"},ie={key:1,class:"time-edited"},ae=g(()=>t("div",{class:"section-title"},"Edited:",-1)),re={key:2,class:"time-added"},ce=g(()=>t("div",{class:"section-title"},"Added:",-1));function _e(e,i,n,r,f,s){const c=F,h=B,u=L,l=b;return o(),a("li",{class:q(`coach-review ${s.highlightClass}`)},[t("div",W,[t("div",O,[_(c,{class:"small"}),t("div",G,[t("span",J,d(s.fullName),1),t("div",K,"Reviews: ("+d(s.reviewsQuantity)+")",1)])]),t("div",X,[t("div",Y,[Z,t("span",null,d(s.reviewRate)+"/5",1)]),t("div",ee,[(o(),a(k,null,$(5,v=>_(h,{key:v,rate:s.reviewRate,index:v},null,8,["rate","index"])),64))])])]),t("div",te,[se,y(" "+d(n.review.description),1)]),t("div",oe,[n.review.authorId===r.authStore.userId?(o(),a("div",ne,[_(u,{class:"rounded",to:{name:"edit-review",params:{reviewId:n.review.reviewId}}},{default:S(()=>[y("Edit")]),_:1},8,["to"]),_(l,{onClick:i[0]||(i[0]=v=>r.reviewsStore.deleteReview(n.review.reviewId)),class:"rounded red"},{default:S(()=>[y("Delete")]),_:1})])):N("",!0),n.review.editedAt?(o(),a("div",ie,[ae,t("span",null,d(s.formatTime(n.review.editedAt)),1)])):(o(),a("div",re,[ce,t("span",null,d(s.formatTime(n.review.createdAt)),1)]))])],2)}const A=w(U,[["render",_e],["__scopeId","data-v-d0cb888f"]]),de={name:"CoachReviewsList",props:{coachId:{type:String,required:!0}},data:()=>({matchingEl:null}),setup(){return{reviewsStore:I()}},computed:{reviews(){return this.reviewsStore.getReviews},reviewsQuantity(){return this.reviews.length}},methods:{scrollToReview(){const{hash:e}=this.$route;if(!e)return;const i=this.matchingEl;i&&i.scrollIntoView({behavior:"smooth"})},isHighlighted(e){return this.$route.hash===`#${e}`}},mounted(){this.scrollToReview()},components:{CoachReviewsListItem:A,NotFound:p,CoachReviewsListLoading:T}};const he={key:0,class:"reviews-list"};function ue(e,i,n,r,f,s){const c=A,h=T,u=p;return o(),m(z,{mode:"out-in"},{default:S(()=>[s.reviewsQuantity&&r.reviewsStore.stateMachine.matches("loaded")?(o(),a("ul",he,[(o(!0),a(k,null,$(s.reviews,(l,v)=>(o(),m(c,{key:v,highlight:s.isHighlighted(l.reviewId),ref_for:!0,ref:R=>{if(`#${l.reviewId}`===e.$route.hash){e.matchingEl=R==null?void 0:R.$el;return}return null},review:l},null,8,["highlight","review"]))),128))])):r.reviewsStore.stateMachine.matches("loading")?(o(),m(h,{key:1})):(o(),m(u,{key:2,element:"Reviews"}))]),_:1})}const E=w(de,[["render",ue],["__scopeId","data-v-db6b25ea"]]),le={name:"CoachReviews",props:{id:{type:String,required:!0}},setup(){return{coachesStore:D()}},computed:{coach(){return this.coachesStore.getCoach(this.id)},isFound(){return!!this.coach}},components:{NotFound:p,CoachReviewsList:E,CoachWrapperHeader:x}};const ve={key:0,class:"coach-reviews"};function me(e,i,n,r,f,s){const c=x,h=E,u=p;return s.isFound?(o(),a("div",ve,[_(c,{id:n.id},null,8,["id"]),_(h,{coachId:n.id},null,8,["coachId"])])):r.coachesStore.stateMachine.matches("loaded")&&!s.isFound?(o(),m(u,{key:1,element:"Coach"})):N("",!0)}const Se=w(le,[["render",me],["__scopeId","data-v-0b17ff4f"]]);export{Se as default};
